import{a as ct,b as gt}from"./chunk-G2RBTVTN.js";import{a as at,b as nt}from"./chunk-I7VVFDVN.js";import{a as z}from"./chunk-AVVNGRPI.js";import{a as pt,b as mt}from"./chunk-GDH4Z5Q7.js";import{a as k,b as B,c as T,d as E,e as ot,f as I}from"./chunk-HRBO5UYO.js";import{a as A,b as _,c as rt,d as st,g as lt}from"./chunk-MDZVM6WG.js";import"./chunk-LYKL7KSC.js";import{c as tt,d as et,e as it,h as x}from"./chunk-GQGP66HK.js";import{b as N,e as Q,g as X,h as Y}from"./chunk-7C6CFOCW.js";import{$a as Z,Ba as K,Ca as U,Da as V,Ea as C,Fa as v,Ga as a,Ha as n,I as P,Ia as S,M as c,Mb as b,N as M,Q as R,Qa as j,Ta as W,Va as l,Wa as w,Xa as h,Za as y,aa as H,bb as m,cb as u,db as q,ga as d,j as F,ka as s,pa as f,ub as J,va as g,za as G}from"./chunk-CFY4N4E5.js";import"./chunk-2BJYVO3V.js";import"./chunk-CWTPBX7D.js";var Mt=(e,t)=>t.slug;function Ct(e,t){if(e&1&&(a(0,"mat-card",3)(1,"mat-card-title",4)(2,"a",5),m(3,"postDateAsPath"),l(4),n()(),a(5,"mat-card-subtitle",6),S(6,"app-blog-post-subtitle",7),n(),a(7,"mat-card-content",8),S(8,"div",9),n(),a(9,"mat-card-footer")(10,"a",10),m(11,"postDateAsPath"),a(12,"mat-icon"),l(13,"read_more"),n(),a(14,"span"),l(15,"\u7E7C\u7E8C\u95B1\u8B80"),n()()()()),e&2){let r=t.$implicit;s(2),g("routerLink",u(3,5,r)),s(2),w(r.title),s(2),g("postMeta",r),s(2),g("innerHTML",r.summary,H),s(2),g("routerLink",u(11,7,r))}}var ut=10,L=(()=>{let t=class t{constructor(){this.siteMetaService=c(z),this.tagSlug=A(i=>i.get("tag-slug"),""),this.currentPage=A(i=>+(i.get("page")||1),1),this.tagPosts=_(i=>i.posts,[]),this.tagPostsCount=d(()=>this.tagPosts().length),this.posts=d(()=>mt(this.currentPage(),ut,this.tagPosts())),this.totalPage=d(()=>Math.ceil(this.tagPostsCount()/ut)),this.updateMetaEffect=f(()=>{this.siteMetaService.resetMeta({title:`\u6A19\u7C64\uFF1A${this.tagSlug()}`,description:`${this.tagSlug()} \u76F8\u95DC\u6587\u7AE0`,keywords:[this.tagSlug()||""],type:"website"})})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=M({type:t,selectors:[["app-blog-tag-posts"]],standalone:!0,features:[y],decls:10,vars:7,consts:[[1,"tags-header","mat-elevation-z4","!mb-2"],["appearance","outlined",1,"pagination"],[3,"linkBase","currentPage","totalPage"],["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[3,"routerLink"],[1,"blog-post-subtitle"],[3,"postMeta"],[1,"blog-post-content"],[3,"innerHTML"],["mat-raised-button","","color","primary",1,"read-more",3,"routerLink"],["appearance","outlined","class","blog-post"]],template:function(o,p){o&1&&(a(0,"mat-toolbar",0)(1,"h1"),l(2),m(3,"unslugify"),n(),a(4,"h2"),l(5),n()(),C(6,Ct,16,9,"mat-card",11,Mt),a(8,"mat-card",1),S(9,"app-pagination",2),n()),o&2&&(s(2),w(u(3,5,p.tagSlug()||"")),s(3),h("\u6A19\u7C64 (\u5171 ",p.tagPostsCount()," \u7BC7\u6587\u7AE0)"),v(6,p.posts()),s(4),W("linkBase","/blog/tags/",p.tagSlug(),"/page"),g("currentPage",p.currentPage()||1)("totalPage",p.totalPage()||1))},dependencies:[nt,at,I,k,T,ot,E,B,b,st,Q,N,Y,X,pt,gt,lt],changeDetection:0});let e=t;return e})();var $=(()=>{let t=class t{constructor(){this.sitePostService=c(x)}resolve(i,o){let p=i.paramMap.get("tag-slug");return this.sitePostService.tagsAndPosts$.pipe(F(O=>ct(p,O)),F(O=>it([et(tt("date"))],O)))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var dt=(()=>{let t=class t{constructor(){this.sitePostService=c(x)}resolve(i,o){return this.sitePostService.tagsAndPosts$}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ft=(()=>{let t=class t{transform(i,o){return i>=o*.4?1:i>=o*.2?2:i>=o*.1?3:4}};t.\u0275fac=function(o){return new(o||t)},t.\u0275pipe=R({name:"blogPostTagSize",type:t,pure:!0,standalone:!0});let e=t;return e})();var vt=e=>["/blog/tags",e];function St(e,t){if(e&1&&(a(0,"a",6),m(1,"blogPostTagSize"),m(2,"slugify"),l(3),n()),e&2){let r=j().$implicit,i=j();G("tag size-",q(1,5,r.value.length,i.maxPostsCount()||0),""),g("routerLink",Z(10,vt,u(2,8,r.key))),s(3),h(" ",r.key," ")}}function yt(e,t){if(e&1&&K(0,St,4,12,"a",5),e&2){let r=t.$implicit;U(0,r!=null&&r.key?0:-1)}}var ht=(()=>{let t=class t{constructor(){this.siteMetaService=c(z),this.tags=_(i=>i.tags,{}),this.aa=d(()=>Object.values(this.tags()).map(i=>i.length)),this.maxPostsCount=d(()=>Math.max(...Object.values(this.tags()).map(i=>i.length))),this._=f(()=>console.log(this.tags())),this._updateMetaEffect=f(()=>{this.siteMetaService.resetMeta({title:"\u6A19\u7C64",description:"\u986F\u793A\u6240\u6709\u6A19\u7C64",keywords:[""],type:"website"})})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=M({type:t,selectors:[["app-blog-tags"]],standalone:!0,features:[y],decls:11,vars:5,consts:[["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[1,"blog-post-subtitle"],[1,"blog-post-content"],[1,"tags"],[3,"class","routerLink"],[3,"routerLink"]],template:function(o,p){o&1&&(a(0,"mat-card",0)(1,"mat-card-title",1),l(2,"\u6A19\u7C64"),n(),a(3,"mat-card-subtitle",2),l(4),m(5,"keyvalue"),n(),a(6,"mat-card-content",3)(7,"div",4),C(8,yt,1,1,null,null,V),m(10,"keyvalue"),n()()()),o&2&&(s(4),h(" \u5171 ",u(5,1,p.tags()).length," \u500B\u6A19\u7C64 "),v(8,u(10,3,p.tags())))},dependencies:[I,k,T,E,B,b,J,rt,ft],styles:[".tags[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:center;flex-wrap:wrap}.tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{margin:8px}.tags[_ngcontent-%COMP%]   .tag.size-1[_ngcontent-%COMP%]{font-size:36px}.tags[_ngcontent-%COMP%]   .tag.size-2[_ngcontent-%COMP%]{font-size:30px}.tags[_ngcontent-%COMP%]   .tag.size-3[_ngcontent-%COMP%]{font-size:24px}.tags[_ngcontent-%COMP%]   .tag.size-4[_ngcontent-%COMP%]{font-size:16px}"],changeDetection:0});let e=t;return e})();var bt=[{path:":tag-slug",resolve:{posts:$},component:L},{path:":tag-slug/page/:page",resolve:{posts:$},component:L},{path:"",resolve:{tags:dt},component:ht}],he=bt;export{he as default};
