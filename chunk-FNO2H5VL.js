import{a as ht,b as Mt}from"./chunk-SA2ET6YS.js";import{a as pt,b as L}from"./chunk-GYCTRUTU.js";import{a as _}from"./chunk-PPW5ZSVI.js";import{a as dt,b as ft}from"./chunk-P5W7L3NE.js";import{a as ct,b as ut,e as gt}from"./chunk-UPR56KL5.js";import{a as O,b as w,c as z,d as A,e as nt,f as h}from"./chunk-P6BWR2LZ.js";import"./chunk-JCRBOZPT.js";import{a as st,b as mt,c as lt,f as D,g as N}from"./chunk-APYMP6ZI.js";import{b as at,e as F}from"./chunk-X7W3THJO.js";import{Aa as J,Ba as Q,Ca as X,Da as B,Ea as $,Fa as p,G as V,Ga as s,Ha as I,Ib as T,Lb as j,O as v,Ob as K,P as y,Pa as H,Pc as rt,Qc as E,S,Sa as Y,U as b,Ua as u,V as x,Va as G,Wa as P,X as W,Ya as k,_a as tt,ab as a,bb as n,cb as et,ea as Z,j as m,la as c,ma as f,tb as it,ua as d,ub as ot,ya as q}from"./chunk-LEKLC6X2.js";import"./chunk-2BJYVO3V.js";import"./chunk-CWTPBX7D.js";var Pt=(()=>{let t=class t{transform(i,o){return i>=o*.4?1:i>=o*.2?2:i>=o*.1?3:4}};t.\u0275fac=function(o){return new(o||t)},t.\u0275pipe=W({name:"blogPostTagSize",type:t,pure:!0,standalone:!0});let e=t;return e})();var Bt=(e,t)=>t.slug;function $t(e,t){if(e&1&&(p(0,"mat-card",3)(1,"mat-card-title",4)(2,"a",5),a(3,"postDateAsPath"),u(4),s()(),p(5,"mat-card-subtitle",6),I(6,"app-blog-post-subtitle",7),s(),p(7,"mat-card-content",8),I(8,"div",9),s(),p(9,"mat-card-footer")(10,"a",10),a(11,"postDateAsPath"),p(12,"mat-icon"),u(13,"read_more"),s(),p(14,"span"),u(15,"\u7E7C\u7E8C\u95B1\u8B80"),s()()()()),e&2){let l=t.$implicit;c(2),d("routerLink",n(3,5,l)),c(2),G(l.title),c(2),d("postMeta",l),c(2),d("innerHTML",l.summary,Z),c(2),d("routerLink",n(11,7,l))}}var Ct=10,C=(()=>{let t=class t{constructor(i,o){this.route=i,this.siteMetaService=o,this.tagSlug$=this.route.paramMap.pipe(m(r=>r.get("tag-slug"))),this.currentPage$=this.route.paramMap.pipe(m(r=>+(r.get("page")||1))),this.tagPosts$=this.route.data.pipe(m(r=>r.posts)),this.tagPostsCount$=this.tagPosts$.pipe(m(r=>r.length)),this.posts$=this.currentPage$.pipe(V(r=>this.tagPosts$.pipe(m(g=>ft(r,Ct,g))))),this.totalPage$=this.tagPosts$.pipe(m(r=>Math.ceil(Object.keys(r).length/Ct)))}ngOnInit(){this.tagSlug$.subscribe(i=>{this.siteMetaService.resetMeta({title:`\u6A19\u7C64\uFF1A${i}`,description:`${i} \u76F8\u95DC\u6587\u7AE0`,keywords:[i||""],type:"website"})})}};t.\u0275fac=function(o){return new(o||t)(f(T),f(_))},t.\u0275cmp=b({type:t,selectors:[["app-blog-tag-posts"]],standalone:!0,features:[k],decls:16,vars:19,consts:[[1,"tags-header","mat-elevation-z4"],["appearance","outlined",1,"pagination"],[3,"linkBase","currentPage","totalPage"],["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[3,"routerLink"],[1,"blog-post-subtitle"],[3,"postMeta"],[1,"blog-post-content"],[3,"innerHTML"],["mat-raised-button","","color","primary",1,"read-more",3,"routerLink"],["appearance","outlined","class","blog-post"]],template:function(o,r){o&1&&(p(0,"mat-toolbar",0)(1,"h1"),u(2),a(3,"unslugify"),a(4,"push"),s(),p(5,"h2"),u(6),a(7,"push"),s()(),B(8,$t,16,9,"mat-card",11,Bt),a(10,"push"),p(11,"mat-card",1),I(12,"app-pagination",2),a(13,"push"),a(14,"push"),a(15,"push"),s()),o&2&&(c(2),G(n(3,5,n(4,7,r.tagSlug$)||"")),c(4),P("\u6A19\u7C64 (\u5171 ",n(7,9,r.tagPostsCount$)," \u7BC7\u6587\u7AE0)"),$(8,n(10,11,r.posts$)),c(6),Y("linkBase","/blog/tags/",n(13,13,r.tagSlug$),"/page"),d("currentPage",n(14,15,r.currentPage$)||1)("totalPage",n(15,17,r.totalPage$)||1))},dependencies:[L,pt,h,O,z,nt,A,w,j,ut,F,at,E,rt,dt,ht,gt,N]});let e=t;return e})();var U=(()=>{let t=class t{constructor(i){this.sitePostService=i}resolve(i,o){let r=i.paramMap.get("tag-slug");return this.sitePostService.tagsAndPosts$.pipe(m(g=>Mt(r,g)),m(g=>lt([mt(st("date"))],g)))}};t.\u0275fac=function(o){return new(o||t)(S(D))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var vt=(()=>{let t=class t{constructor(i){this.sitePostService=i}resolve(i,o){return this.sitePostService.tagsAndPosts$}};t.\u0275fac=function(o){return new(o||t)(S(D))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var kt=e=>["/blog/tags",e];function Tt(e,t){if(e&1&&(p(0,"a",6),a(1,"blogPostTagSize"),a(2,"push"),a(3,"slugify"),u(4),s()),e&2){let l=H().$implicit,i=H();q("tag size-",et(1,5,l.value.length,n(2,8,i.maxPostsCount$)||0),""),d("routerLink",tt(12,kt,n(3,10,l.key))),c(4),P(" ",l.key," ")}}function jt(e,t){if(e&1&&J(0,Tt,5,14,"a",5),e&2){let l=t.$implicit;Q(0,l!=null&&l.key?0:-1)}}var R=(()=>{let t=class t{constructor(i,o){this.route=i,this.siteMetaService=o,this.tags$=this.route.data.pipe(m(r=>r.tags)),this.maxPostsCount$=this.tags$.pipe(m(r=>Math.max(...Object.values(r).map(g=>g.length))))}ngOnInit(){this.siteMetaService.resetMeta({title:"\u6A19\u7C64",description:"\u986F\u793A\u6240\u6709\u6A19\u7C64",keywords:[""],type:"website"})}};t.\u0275fac=function(o){return new(o||t)(f(T),f(_))},t.\u0275cmp=b({type:t,selectors:[["app-blog-tags"]],standalone:!0,features:[k],decls:13,vars:9,consts:[["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[1,"blog-post-subtitle"],[1,"blog-post-content"],[1,"tags"],[3,"class","routerLink"],[3,"routerLink"]],template:function(o,r){o&1&&(p(0,"mat-card",0)(1,"mat-card-title",1),u(2," \u6A19\u7C64 "),s(),p(3,"mat-card-subtitle",2),u(4),a(5,"keyvalue"),a(6,"push"),s(),p(7,"mat-card-content",3)(8,"div",4),B(9,jt,1,1,null,null,X),a(11,"keyvalue"),a(12,"push"),s()()()),o&2&&(c(4),P(" \u5171 ",n(5,1,n(6,3,r.tags$)).length," \u500B\u6A19\u7C64 "),$(9,n(11,5,n(12,7,r.tags$))))},dependencies:[h,O,z,A,w,j,it,ct,N,Pt],styles:[".tags[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:center;flex-wrap:wrap}.tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{margin:8px}.tags[_ngcontent-%COMP%]   .tag.size-1[_ngcontent-%COMP%]{font-size:36px}.tags[_ngcontent-%COMP%]   .tag.size-2[_ngcontent-%COMP%]{font-size:30px}.tags[_ngcontent-%COMP%]   .tag.size-3[_ngcontent-%COMP%]{font-size:24px}.tags[_ngcontent-%COMP%]   .tag.size-4[_ngcontent-%COMP%]{font-size:16px}"]});let e=t;return e})();var Et=[{path:":tag-slug",resolve:{posts:U},component:C},{path:":tag-slug/page/:page",resolve:{posts:U},component:C},{path:"",resolve:{tags:vt},component:R}],yt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=x({type:t}),t.\u0275inj=y({imports:[K.forChild(Et),K]});let e=t;return e})();var $e=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=x({type:t}),t.\u0275inj=y({imports:[ot,yt,h,F,E,L,R,C]});let e=t;return e})();export{$e as BlogTagsModule};
