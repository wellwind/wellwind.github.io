"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[610],{5610:(b,m,e)=>{e.r(m),e.d(m,{BlogArchivesModule:()=>O});var u=e(8583),v=e(1095),l=e(3738),A=e(6627),d=e(2522),T=e(7721),p=e(4655),t=e(7716),$=e(2098);let Z=(()=>{class o{constructor(s){this.sitePostService=s}resolve(s,n){return this.sitePostService.postsMetaWithSlugAndSortDesc$}}return o.\u0275fac=function(s){return new(s||o)(t.LFG($.g))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var c=e(8002),y=e(3190),C=e(2985),M=e(8173),U=e(7122),L=e(3651);function Q(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-card",4),t.TgZ(2,"mat-card-title",5),t.TgZ(3,"a",6),t.ALo(4,"postDateAsPath"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"mat-card-subtitle",7),t._UZ(7,"app-blog-post-subtitle",8),t.qZA(),t.TgZ(8,"mat-card-content",9),t._UZ(9,"div",10),t.qZA(),t.TgZ(10,"mat-card-footer"),t.TgZ(11,"button",11),t.ALo(12,"postDateAsPath"),t.TgZ(13,"mat-icon"),t._uU(14,"read_more"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"\u7e7c\u7e8c\u95b1\u8b80"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&o){const s=a.$implicit;t.xp6(3),t.Q6J("routerLink",t.lcZ(4,5,s)),t.xp6(2),t.Oqu(s.title),t.xp6(2),t.Q6J("postMeta",s),t.xp6(2),t.Q6J("innerHTML",s.summary,t.oJD),t.xp6(2),t.Q6J("routerLink",t.lcZ(12,7,s))}}function J(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-toolbar",3),t.TgZ(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.qZA(),t.qZA(),t.YNc(6,Q,17,9,"ng-container",0),t.BQk()),2&o){const s=a.$implicit;t.xp6(3),t.Oqu(s.year),t.xp6(2),t.hij("\u5e74 (\u5171 ",s.postCount," \u7bc7\u6587\u7ae0)"),t.xp6(1),t.Q6J("ngForOf",s.posts)}}let B=(()=>{class o{constructor(s){this.route=s,this.currentPage$=this.route.paramMap.pipe((0,c.U)(n=>+(n.get("page")||1))),this.totalPosts$=this.route.data.pipe((0,c.U)(n=>n.posts)),this.yearPostsCount$=this.totalPosts$.pipe((0,c.U)(n=>n.reduce((r,g)=>{const i=g.date.substr(1,4);return r[i]||(r[i]=0),r[i]+=1,r},{}))),this.posts$=this.currentPage$.pipe((0,y.w)(n=>this.totalPosts$.pipe((0,c.U)(r=>(0,C.$)(n,10,r)))),(0,y.w)(n=>this.yearPostsCount$.pipe((0,c.U)(r=>n.reduce((g,i)=>{const h=i.date.slice(0,4);let P=g.find(S=>S.year===h);return P?P.posts.push(i):g.push({year:h,postCount:r[h],posts:[i]}),g},[]))))),this.totalPage$=this.totalPosts$.pipe((0,c.U)(n=>Math.ceil(Object.keys(n).length/10)))}ngOnInit(){}}return o.\u0275fac=function(s){return new(s||o)(t.Y36(p.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-blog-archives"]],decls:6,vars:9,consts:[[4,"ngFor","ngForOf"],[1,"pagination"],["linkBase","/blog/archives/page",3,"currentPage","totalPage"],[1,"year-header","mat-elevation-z4"],[1,"blog-post"],[1,"blog-post-title"],[3,"routerLink"],[1,"blog-post-subtitle"],[3,"postMeta"],[1,"blog-post-content"],[3,"innerHTML"],["mat-raised-button","","color","primary",3,"routerLink"]],template:function(s,n){1&s&&(t.YNc(0,J,7,3,"ng-container",0),t.ALo(1,"async"),t.TgZ(2,"mat-card",1),t._UZ(3,"app-pagination",2),t.ALo(4,"async"),t.ALo(5,"async"),t.qZA()),2&s&&(t.Q6J("ngForOf",t.lcZ(1,3,n.posts$)),t.xp6(3),t.Q6J("currentPage",t.lcZ(4,5,n.currentPage$)||1)("totalPage",t.lcZ(5,7,n.totalPage$)||1))},directives:[u.sg,l.a8,M.Q,d.Ye,l.n5,p.yS,l.$j,U.z,l.dn,l.rt,v.lW,p.rH,A.Hw],pipes:[u.Ov,L.y],styles:[""]}),o})();const F=[{path:"",resolve:{posts:Z},component:B},{path:"page/:page",resolve:{posts:Z},component:B}];let x=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.Bz.forChild(F)],p.Bz]}),o})(),O=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.ez,x,d.g0,l.QW,T.a,A.Ps,v.ot]]}),o})()}}]);