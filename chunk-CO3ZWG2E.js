import{a as X,b as S}from"./chunk-LLOZPQ4I.js";import{a as tt,b as ot}from"./chunk-UTJ7WADY.js";import{b as _,e as et}from"./chunk-5QCG7PDC.js";import{a as J,b as K,c as Q,d as U,e as V,f as v}from"./chunk-UTWX254T.js";import"./chunk-747JYNUV.js";import{f as Y}from"./chunk-34HZ3IGH.js";import{b as q,e as b}from"./chunk-5C5HB5ZG.js";import{A as E,Cb as W,Fb as T,G as F,Gc as Z,H as M,Hc as C,J as L,Ka as d,L as D,La as x,M as y,Ma as H,Oa as z,Sa as u,Ta as f,X as w,ba as s,ca as N,h as l,ib as O,ka as c,lb as R,ta as I,ua as B,va as r,wa as p,xa as P,zb as G}from"./chunk-4IQPA3HJ.js";import"./chunk-2BJYVO3V.js";import"./chunk-CWTPBX7D.js";var A=(()=>{let t=class t{constructor(n){this.sitePostService=n}resolve(n,o){return this.sitePostService.postsMetaWithSlugAndSortDesc$}};t.\u0275fac=function(o){return new(o||t)(L(Y))},t.\u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var nt=(e,t)=>t.year,st=(e,t)=>t.slug;function pt(e,t){if(e&1&&(r(0,"mat-card",3)(1,"mat-card-title",4)(2,"a",5),u(3,"postDateAsPath"),d(4),p()(),r(5,"mat-card-subtitle",6),P(6,"app-blog-post-subtitle",7),p(),r(7,"mat-card-content",8),P(8,"div",9),p(),r(9,"mat-card-footer")(10,"a",10),u(11,"postDateAsPath"),r(12,"mat-icon"),d(13,"read_more"),p(),r(14,"span"),d(15,"\u7E7C\u7E8C\u95B1\u8B80"),p()()()()),e&2){let a=t.$implicit;s(2),c("routerLink",f(3,5,a)),s(2),x(a.title),s(2),c("postMeta",a),s(2),c("innerHTML",a.summary,w),s(2),c("routerLink",f(11,7,a))}}function mt(e,t){if(e&1&&(r(0,"mat-toolbar",2)(1,"h1"),d(2),p(),r(3,"h2"),d(4),p()(),I(5,pt,16,9,"mat-card",11,st)),e&2){let a=t.$implicit;s(2),x(a.year),s(2),H("\u5E74 (\u5171 ",a.postCount," \u7BC7\u6587\u7AE0)"),B(5,a.posts)}}var it=10,g=(()=>{let t=class t{constructor(n){this.route=n,this.currentPage$=this.route.paramMap.pipe(l(o=>+(o.get("page")||1))),this.totalPosts$=this.route.data.pipe(l(o=>o.posts)),this.yearPostsCount$=this.totalPosts$.pipe(l(o=>o.reduce((i,h)=>{let m=h.date.substr(0,4);return i[m]||(i[m]=0),i[m]+=1,i},{}))),this.posts$=this.currentPage$.pipe(E(o=>this.totalPosts$.pipe(l(i=>ot(o,it,i)))),E(o=>this.yearPostsCount$.pipe(l(i=>o.reduce((h,m)=>{let $=m.date.slice(0,4),j=h.find(at=>at.year===$);return j?j.posts.push(m):h.push({year:$,postCount:i[$],posts:[m]}),h},[]))))),this.totalPage$=this.totalPosts$.pipe(l(o=>Math.ceil(Object.keys(o).length/it)))}ngOnInit(){}};t.\u0275fac=function(o){return new(o||t)(N(G))},t.\u0275cmp=D({type:t,selectors:[["app-blog-archives"]],standalone:!0,features:[z],decls:7,vars:8,consts:[["appearance","outlined",1,"pagination"],["linkBase","/blog/archives/page",3,"currentPage","totalPage"],[1,"year-header","mat-elevation-z4","!mb-2"],["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[3,"routerLink"],[1,"blog-post-subtitle"],[3,"postMeta"],[1,"blog-post-content"],[3,"innerHTML"],["mat-raised-button","","color","primary",1,"read-more",3,"routerLink"],["appearance","outlined","class","blog-post"]],template:function(o,i){o&1&&(I(0,mt,7,2,null,null,nt),u(2,"async"),r(3,"mat-card",0),P(4,"app-pagination",1),u(5,"async"),u(6,"async"),p()),o&2&&(B(0,f(2,2,i.posts$)),s(4),c("currentPage",f(5,4,i.currentPage$)||1)("totalPage",f(6,6,i.totalPage$)||1))},dependencies:[S,X,v,J,Q,V,U,K,W,_,b,q,C,Z,tt,et,O]});let e=t;return e})();var lt=[{path:"",resolve:{posts:A},component:g},{path:"page/:page",resolve:{posts:A},component:g}],rt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=y({type:t}),t.\u0275inj=M({imports:[T.forChild(lt),T]});let e=t;return e})();var Rt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=y({type:t}),t.\u0275inj=M({imports:[R,rt,S,v,C,b,g]});let e=t;return e})();export{Rt as BlogArchivesModule};
