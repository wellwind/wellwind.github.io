import{k as z,l as W,m as j,t as N}from"./chunk-I2RQNTAM.js";import{a as A,b as F}from"./chunk-RIPZ5TCG.js";import"./chunk-LLN72F2T.js";import{a as K,c as V,f as q}from"./chunk-ZGLVEUC2.js";import{a as f,h as I}from"./chunk-SPUNDOAV.js";import{Aa as h,Bb as B,C as x,D,Ea as w,Ja as p,La as $,M as C,Ma as O,Na as r,Oa as i,Q as S,R as E,Ra as T,Rb as L,Ta as Q,Ua as l,Ub as R,db as a,eb as b,fb as m,j as d,k as M,kb as _,l as k,mb as y,na as o,q as u,va as P}from"./chunk-CVAY75XQ.js";import"./chunk-VOSPIT4N.js";var U=(e,c)=>c.link;function X(e,c){if(e&1&&(r(0,"h1"),a(1),i()),e&2){let t=l(2);o(),m(" ",t.searchKeyword()," ")}}function Y(e,c){if(e&1&&(r(0,"span",3),a(1),_(2,"date"),i()),e&2){let t=l(2);o(),m(" Start: ",y(2,1,t.searchDateStart(),"yyyy-MM-dd")," ")}}function Z(e,c){if(e&1&&(r(0,"span",3),a(1),_(2,"date"),i()),e&2){let t=l(2);o(),m(" End: ",y(2,1,t.searchDateEnd(),"yyyy-MM-dd")," ")}}function tt(e,c){if(e&1&&(r(0,"span",7),a(1),_(2,"date"),i()),e&2){let t=l().$implicit;o(),m(" ",y(2,1,t.date,"yyyy-MM-dd")," ")}}function et(e,c){if(e&1){let t=T();r(0,"mat-list-item",5),Q("click",function(){let s=S(t).$implicit,g=l(2);return E(g.log(s.link,s.text))}),r(1,"div",6),h(2,tt,3,4,"span",7),r(3,"span",7),a(4),i(),r(5,"span",8),a(6),i()()()}if(e&2){let t=c.$implicit,n=l(2);w("routerLink",t.link),o(2),p((n.searchDateStart()||n.searchDateEnd())&&t.type==="\u6587\u7AE0"?2:-1),o(2),b(t.type),o(2),b(t.text)}}function ot(e,c){if(e&1&&(r(0,"mat-toolbar",1),h(1,X,2,1,"h1"),r(2,"h2"),a(3,"\u641C\u5C0B\u7D50\u679C"),i()(),r(4,"mat-card",2)(5,"mat-card-content")(6,"h2"),a(7),i(),h(8,Y,3,4,"span",3)(9,Z,3,4,"span",3),r(10,"mat-nav-list"),$(11,et,7,4,"mat-list-item",4,U),i()()()),e&2){let t=l();o(),p(t.searchKeyword()?1:-1),o(6),m("\u5171 ",t.searchResult().length," \u7BC7\u6587\u7AE0"),o(),p(t.searchDateStart()?8:-1),o(),p(t.searchDateEnd()?9:-1),o(2),O(t.searchResult())}}var G=(()=>{class e{constructor(){this.sitePostService=C(I),this.route=C(L),this.searchKeyword$=this.route.queryParamMap.pipe(d(t=>t.get("q")),u(Boolean),x("")),this.searchKeyword=f(this.searchKeyword$,{initialValue:""}),this.searchDateStart$=this.route.queryParamMap.pipe(d(t=>t.get("start")),u(t=>!!t),d(t=>new Date(t)),x(void 0)),this.searchDateStart=f(this.searchDateStart$,{initialValue:void 0}),this.searchDateEnd$=this.route.queryParamMap.pipe(d(t=>t.get("end")),u(t=>!!t),d(t=>new Date(t)),x(void 0)),this.searchDateEnd=f(this.searchDateEnd$,{initialValue:void 0}),this.searchResult$=M([this.sitePostService.postsMetaWithSlugAndSortDesc$,this.searchKeyword$,this.searchDateStart$,this.searchDateEnd$]).pipe(D(([t,n,s,g])=>k(()=>import("./chunk-A5FBTWJ5.js").then(v=>{let H=v.searchPosts,J=v.searchPostsByDateRange(s,g);return H(J(t),n)})))),this.searchResult=f(this.searchResult$,{initialValue:[]})}log(t,n){N.api.pushEvent("click-query-result",{keyword:this.searchKeyword(),link:t,title:n})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=P({type:e,selectors:[["app-query"]],decls:2,vars:1,consts:[[1,"p-4"],[1,"search-header","mat-elevation-z4","!mb-2"],["appearance","outlined"],[1,"search-chip"],[3,"routerLink"],[3,"click","routerLink"],["matLine","",1,"search-result"],[1,"search-result-type"],[1,"search-result-title"]],template:function(n,s){n&1&&(r(0,"div",0),h(1,ot,13,4),i()),n&2&&(o(),p(s.searchResult()?1:-1))},dependencies:[F,A,q,K,V,j,W,z,R,B],styles:["[_ngcontent-%COMP%]:root{--background-color:#ffffff;--primary-color: #3f51b5;--primary-text-color: #212121;--secondary-text-color: #9e9e9e;--header-link-color: #ffffff;--default-link-color: #5c6bc0;--default-link-hover-color: #3949ab;--post-card-header-link-color: #212121;--post-card-header-link-hover-color: #3f51b5;--post-card-content-text-color: #212121;--sidebar-text-color: #757575;--sidebar-highlight-text-color: var(--primary-color);--sub-pages-header-background-color: #ffffff;--post-next-prev-text-color: #9e9e9e;--note-background-color: transparent;--note-border-color: rgba(0, 0, 0, .2);--note-info-indicator-color: #3f51b5;--note-warning-indicator-color: #ff9800;--note-danger-indicator-color: #e91e63;--toc-header-color: #212121;--toc-indicator-color: #9e9e9e;--toc-indicator-focus-color: #3f51b5;--code-text-color: #3f51b5;--code-background-color: #eeeeee}[_ngcontent-%COMP%]:root   .dark-theme[_ngcontent-%COMP%]{--background-color:#424242;--primary-color: #9fa8da;--primary-text-color: #f5f5f5;--secondary-text-color: #bdbdbd;--search-input-background-color: #424242;--search-input-text-color: #ffffff;--default-link-color: #D4DAED;--default-link-hover-color: hsl(225.6, 40.9836065574%, 103.0392156863%);--post-card-header-link-color: #f5f5f5;--post-card-header-link-hover-color: #9fa8da;--post-card-content-text-color: #f5f5f5;--sidebar-text-color: #bdbdbd;--sidebar-highlight-text-color: var(--primary-color);--sub-pages-header-background-color: #424242;--post-next-prev-text-color: #bdbdbd;--note-background-color: transparent;--note-border-color: rgba(255, 255, 255, .3);--note-info-indicator-color: #3f51b5;--note-warning-indicator-color: #ff9800;--note-danger-indicator-color: #e91e63;--toc-header-color: #f5f5f5;--toc-indicator-color: #9e9e9e;--toc-indicator-focus-color: #9fa8da;--code-text-color: #D4DAED;--code-background-color: #424242}[_ngcontent-%COMP%]:root   .dark-theme[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   input.search-input[_ngcontent-%COMP%]{color:var(--search-input-text-color);background-color:var(--search-input-background-color)}.search-result[_ngcontent-%COMP%]{display:flex!important;flex-direction:row;align-items:baseline}@media (max-width: 599.98px){.search-result[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}.search-result[_ngcontent-%COMP%]   .search-result-type[_ngcontent-%COMP%]{color:var(--secondary-text-color);font-size:14px;margin-right:8px}.search-result[_ngcontent-%COMP%]   .search-result-title[_ngcontent-%COMP%]{color:var(--primary-text-color);font-size:18px}.search-chip[_ngcontent-%COMP%]{color:#fff;background:var(--primary-color);margin:2px;padding:2px;border-radius:4px}"],changeDetection:0})}}return e})();var rt=[{path:"",component:G}],vt=rt;export{vt as default};
