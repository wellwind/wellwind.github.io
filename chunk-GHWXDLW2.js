import{a as pt,b as lt}from"./chunk-UDFCGUGQ.js";import{a as et,b as it}from"./chunk-OFRKGTJD.js";import{a as E}from"./chunk-LTWU2YAM.js";import{a as nt,b as st}from"./chunk-4R6KSZ2X.js";import{a as b,b as x,c as B,d as T,e as tt,f as _}from"./chunk-GJBL4RJA.js";import{a as A,b as k,c as ot,d as at,g as rt}from"./chunk-KJQM4MXN.js";import"./chunk-NBJ7CMD7.js";import{b as Q,c as X,d as Y,h as y}from"./chunk-JBH457TQ.js";import{c as Z,e as q,g as J,h as N}from"./chunk-ZR34AVFL.js";import{Aa as $,Cb as W,Ea as m,I as f,Ia as R,Ja as H,Ka as G,La as h,M as l,Ma as C,Na as o,Oa as n,Pa as M,Ua as D,Ub as S,Xa as K,db as s,eb as O,fb as d,ib as U,j as z,kb as p,la as F,lb as c,mb as V,na as a,tb as g,ub as v,va as P,ya as w}from"./chunk-MAD2N4LW.js";import"./chunk-2BJYVO3V.js";import"./chunk-VOSPIT4N.js";var ft=(t,u)=>u.slug;function Pt(t,u){if(t&1&&(o(0,"mat-card",1)(1,"mat-card-title",4)(2,"a",5),p(3,"postDateAsPath"),s(4),n()(),o(5,"mat-card-subtitle",6),M(6,"app-blog-post-subtitle",7),n(),o(7,"mat-card-content",8),M(8,"div",9),n(),o(9,"mat-card-footer")(10,"a",10),p(11,"postDateAsPath"),o(12,"mat-icon"),s(13,"read_more"),n(),o(14,"span"),s(15,"\u7E7C\u7E8C\u95B1\u8B80"),n()()()()),t&2){let e=u.$implicit;a(2),m("routerLink",c(3,5,e)),a(2),O(e.title),a(2),m("postMeta",e),a(2),m("innerHTML",e.summary,F),a(2),m("routerLink",c(11,7,e))}}var mt=10,L=(()=>{class t{constructor(){this.siteMetaService=l(E),this.tagSlug=A(e=>e.get("tag-slug"),""),this.currentPage=A(e=>+(e.get("page")||1),1),this.tagPosts=k(e=>e.posts,[]),this.tagPostsCount=g(()=>this.tagPosts().length),this.posts=g(()=>st(this.currentPage(),mt,this.tagPosts())),this.totalPage=g(()=>Math.ceil(this.tagPostsCount()/mt)),this.updateMetaEffect=v(()=>{this.siteMetaService.resetMeta({title:`\u6A19\u7C64\uFF1A${this.tagSlug()}`,description:`${this.tagSlug()} \u76F8\u95DC\u6587\u7AE0`,keywords:[this.tagSlug()||""],type:"website"})})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=P({type:t,selectors:[["app-blog-tag-posts"]],decls:10,vars:8,consts:[[1,"tags-header","mat-elevation-z4","!mb-2"],["appearance","outlined",1,"blog-post"],["appearance","outlined",1,"pagination"],[3,"linkBase","currentPage","totalPage"],[1,"blog-post-title"],[3,"routerLink"],[1,"blog-post-subtitle"],[3,"postMeta"],[1,"blog-post-content"],[3,"innerHTML"],["mat-raised-button","","color","primary",1,"read-more",3,"routerLink"]],template:function(i,r){i&1&&(o(0,"mat-toolbar",0)(1,"h1"),s(2),p(3,"unslugify"),n(),o(4,"h2"),s(5),n()(),h(6,Pt,16,9,"mat-card",1,ft),o(8,"mat-card",2),M(9,"app-pagination",3),n()),i&2&&(a(2),O(c(3,6,r.tagSlug()||"")),a(3),d("\u6A19\u7C64 (\u5171 ",r.tagPostsCount()," \u7BC7\u6587\u7AE0)"),a(),C(r.posts()),a(3),K("linkBase","/blog/tags/",r.tagSlug(),"/page"),m("currentPage",r.currentPage()||1)("totalPage",r.totalPage()||1))},dependencies:[it,et,_,b,B,tt,T,x,S,at,q,Z,N,J,nt,lt,rt],encapsulation:2,changeDetection:0})}}return t})();var j=(()=>{class t{constructor(){this.sitePostService=l(y)}resolve(e){let i=e.paramMap.get("tag-slug");return this.sitePostService.tagsAndPosts$.pipe(z(r=>pt(i,r)),z(r=>Y([X(Q("date"))],r)))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ct=(()=>{class t{constructor(){this.sitePostService=l(y)}resolve(){return this.sitePostService.tagsAndPosts$}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var gt=(()=>{class t{transform(e,i){return e>=i*.4?1:e>=i*.2?2:e>=i*.1?3:4}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=w({name:"blogPostTagSize",type:t,pure:!0})}}return t})();var ht=t=>["/blog/tags",t];function Ct(t,u){if(t&1&&(o(0,"a",6),p(1,"blogPostTagSize"),p(2,"slugify"),s(3),n()),t&2){let e=D().$implicit,i=D();R("tag size-",V(1,5,e.value.length,i.maxPostsCount()||0),""),m("routerLink",U(10,ht,c(2,8,e.key))),a(3),d(" ",e.key," ")}}function Mt(t,u){if(t&1&&$(0,Ct,4,12,"a",5),t&2){let e=u.$implicit;H(e!=null&&e.key?0:-1)}}var ut=(()=>{class t{constructor(){this.siteMetaService=l(E),this.tags=k(e=>e.tags,{}),this.aa=g(()=>Object.values(this.tags()).map(e=>e.length)),this.maxPostsCount=g(()=>Math.max(...Object.values(this.tags()).map(e=>e.length))),this._updateMetaEffect=v(()=>{this.siteMetaService.resetMeta({title:"\u6A19\u7C64",description:"\u986F\u793A\u6240\u6709\u6A19\u7C64",keywords:[""],type:"website"})})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=P({type:t,selectors:[["app-blog-tags"]],decls:11,vars:5,consts:[["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[1,"blog-post-subtitle"],[1,"blog-post-content"],[1,"tags"],[3,"class","routerLink"],[3,"routerLink"]],template:function(i,r){i&1&&(o(0,"mat-card",0)(1,"mat-card-title",1),s(2,"\u6A19\u7C64"),n(),o(3,"mat-card-subtitle",2),s(4),p(5,"keyvalue"),n(),o(6,"mat-card-content",3)(7,"div",4),h(8,Mt,1,1,null,null,G),p(10,"keyvalue"),n()()()),i&2&&(a(4),d(" \u5171 ",c(5,1,r.tags()).length," \u500B\u6A19\u7C64 "),a(4),C(c(10,3,r.tags())))},dependencies:[_,b,B,T,x,S,W,ot,gt],styles:[".tags[_ngcontent-%COMP%]{text-align:center;line-height:36px;margin:8px}.tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{margin:8px}.tags[_ngcontent-%COMP%]   .tag.size-1[_ngcontent-%COMP%]{font-size:36px}.tags[_ngcontent-%COMP%]   .tag.size-2[_ngcontent-%COMP%]{font-size:30px}.tags[_ngcontent-%COMP%]   .tag.size-3[_ngcontent-%COMP%]{font-size:24px}.tags[_ngcontent-%COMP%]   .tag.size-4[_ngcontent-%COMP%]{font-size:16px}"],changeDetection:0})}}return t})();var vt=[{path:":tag-slug",resolve:{posts:j},component:L},{path:":tag-slug/page/:page",resolve:{posts:j},component:L},{path:"",resolve:{tags:ct},component:ut}],ue=vt;export{ue as default};
