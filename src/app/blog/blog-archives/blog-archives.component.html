<ng-container *ngFor="let yearPosts of posts$ | async">
  <mat-toolbar class="year-header mat-elevation-z4">
    <h1>{{ yearPosts.year }}</h1>
    <h2>(共 {{ yearPosts.postCount }} 篇文章)</h2>
  </mat-toolbar>

  <ng-container *ngFor="let post of yearPosts.posts">

    <mat-card class="blog-post">
      <mat-card-title class="blog-post-title">
        <a
          [routerLink]="['/blog/', (post.date | date:'yyyy'), (post.date | date:'MM'), (post.date | date:'dd'), post.slug]">{{ post.title }}</a>
      </mat-card-title>

      <mat-card-subtitle class="blog-post-subtitle">
        <app-blog-post-subtitle [postMeta]="post"></app-blog-post-subtitle>
      </mat-card-subtitle>

      <mat-card-content class="blog-post-content">
        <div [innerHTML]="post.summary"></div>
      </mat-card-content>

      <mat-card-footer>
        <button
          [routerLink]="['/blog/', (post.date | date:'yyyy'), (post.date | date:'MM'), (post.date | date:'dd'), post.slug]"
          mat-raised-button
          color="primary">
          <mat-icon>read_more</mat-icon>
          <span>繼續閱讀</span>
        </button>
      </mat-card-footer>
    </mat-card>

  </ng-container>

</ng-container>

<mat-card class="pagination">
  <app-pagination
    linkBase="/blog/archives/page"
    [currentPage]="(currentPage$ | async) || 1"
    [totalPage]="(totalPage$ | async) || 1"></app-pagination>
</mat-card>
