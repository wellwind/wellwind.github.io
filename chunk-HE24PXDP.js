import{a as N,b as W}from"./chunk-PMJUEI5Q.js";import{a as K,b as Q}from"./chunk-RNNFPY6H.js";import{a as j,b as H,c as R,d as w,e as z,f as G}from"./chunk-5SURUXUN.js";import{a as Z,b as q,d as J,g as O}from"./chunk-HXKAOSDU.js";import"./chunk-VXCSXRBK.js";import{g as $}from"./chunk-Z5R2DTUN.js";import{b as I,e as _,g as F,h as L}from"./chunk-FPA2J5JD.js";import{Da as h,Ea as P,Fa as i,Ga as p,Ha as u,I as E,Lb as D,M as x,N as B,Ua as l,Va as C,Wa as T,Ya as k,aa as A,ab as y,bb as M,ga as c,ja as s,ua as m}from"./chunk-IN3HSR3R.js";import"./chunk-2BJYVO3V.js";import"./chunk-CWTPBX7D.js";var v=(()=>{let t=class t{constructor(){this.sitePostService=x($)}resolve(){return this.sitePostService.postsMetaWithSlugAndSortDesc$}};t.\u0275fac=function(a){return new(a||t)},t.\u0275prov=E({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var tt=(e,t)=>t.year,et=(e,t)=>t.slug;function ot(e,t){if(e&1&&(i(0,"mat-card",3)(1,"mat-card-title",4)(2,"a",5),y(3,"postDateAsPath"),l(4),p()(),i(5,"mat-card-subtitle",6),u(6,"app-blog-post-subtitle",7),p(),i(7,"mat-card-content",8),u(8,"div",9),p(),i(9,"mat-card-footer")(10,"a",10),y(11,"postDateAsPath"),i(12,"mat-icon"),l(13,"read_more"),p(),i(14,"span"),l(15,"\u7E7C\u7E8C\u95B1\u8B80"),p()()()()),e&2){let r=t.$implicit;s(2),m("routerLink",M(3,5,r)),s(2),C(r.title),s(2),m("postMeta",r),s(2),m("innerHTML",r.summary,A),s(2),m("routerLink",M(11,7,r))}}function at(e,t){if(e&1&&(i(0,"mat-toolbar",2)(1,"h1"),l(2),p(),i(3,"h2"),l(4),p()(),h(5,ot,16,9,"mat-card",11,et)),e&2){let r=t.$implicit;s(2),C(r.year),s(2),T("\u5E74 (\u5171 ",r.postCount," \u7BC7\u6587\u7AE0)"),P(5,r.posts)}}var U=10,b=(()=>{let t=class t{constructor(){this.currentPage=Z(o=>+(o.get("page")||1),1),this.totalPosts=q(o=>o.posts,[]),this.yearPostsCount=c(()=>this.totalPosts().reduce((o,a)=>{let n=a.date.substr(0,4);return o[n]||(o[n]=0),o[n]+=1,o},{})),this.posts=c(()=>{let o=this.totalPosts(),a=this.currentPage(),n=Q(a,U,o),V=this.yearPostsCount();return n.reduce((d,f)=>{let g=f.date.slice(0,4),S=d.find(X=>X.year===g);return S?S.posts.push(f):d.push({year:g,postCount:V[g],posts:[f]}),d},[])}),this.totalPage=c(()=>Math.ceil(this.totalPosts().length/U))}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=B({type:t,selectors:[["app-blog-archives"]],standalone:!0,features:[k],decls:4,vars:2,consts:[["appearance","outlined",1,"pagination"],["linkBase","/blog/archives/page",3,"currentPage","totalPage"],[1,"year-header","mat-elevation-z4","!mb-2"],["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[3,"routerLink"],[1,"blog-post-subtitle"],[3,"postMeta"],[1,"blog-post-content"],[3,"innerHTML"],["mat-raised-button","","color","primary",1,"read-more",3,"routerLink"],["appearance","outlined","class","blog-post"]],template:function(a,n){a&1&&(h(0,at,7,2,null,null,tt),i(2,"mat-card",0),u(3,"app-pagination",1),p()),a&2&&(P(0,n.posts()),s(3),m("currentPage",n.currentPage()||1)("totalPage",n.totalPage()||1))},dependencies:[W,N,G,j,R,z,w,H,D,J,_,I,L,F,K,O],changeDetection:0});let e=t;return e})();var it=[{path:"",resolve:{posts:v},component:b},{path:"page/:page",resolve:{posts:v},component:b}],kt=it;export{kt as default};
