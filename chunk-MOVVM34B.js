import{a as V,b as S}from"./chunk-GYCTRUTU.js";import{a as tt,b as ot}from"./chunk-P5W7L3NE.js";import{b as _,e as et}from"./chunk-UPR56KL5.js";import{a as q,b as J,c as K,d as Q,e as U,f as v}from"./chunk-P6BWR2LZ.js";import"./chunk-JCRBOZPT.js";import{f as X,g as Y}from"./chunk-APYMP6ZI.js";import{b as Z,e as b}from"./chunk-X7W3THJO.js";import{Da as I,Ea as x,Fa as r,G as E,Ga as s,Ha as y,Ib as O,Lb as G,O as A,Ob as T,P as M,Pc as W,Qc as C,S as L,U as D,Ua as u,V as P,Va as B,Wa as H,Ya as R,ab as d,bb as f,ea as w,j as l,la as p,ma as N,ua as c,ub as z}from"./chunk-LEKLC6X2.js";import"./chunk-2BJYVO3V.js";import"./chunk-CWTPBX7D.js";var F=(()=>{let t=class t{constructor(n){this.sitePostService=n}resolve(n,o){return this.sitePostService.postsMetaWithSlugAndSortDesc$}};t.\u0275fac=function(o){return new(o||t)(L(X))},t.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var nt=(e,t)=>t.year,pt=(e,t)=>t.slug;function st(e,t){if(e&1&&(r(0,"mat-card",3)(1,"mat-card-title",4)(2,"a",5),d(3,"postDateAsPath"),u(4),s()(),r(5,"mat-card-subtitle",6),y(6,"app-blog-post-subtitle",7),s(),r(7,"mat-card-content",8),y(8,"div",9),s(),r(9,"mat-card-footer")(10,"a",10),d(11,"postDateAsPath"),r(12,"mat-icon"),u(13,"read_more"),s(),r(14,"span"),u(15,"\u7E7C\u7E8C\u95B1\u8B80"),s()()()()),e&2){let a=t.$implicit;p(2),c("routerLink",f(3,5,a)),p(2),B(a.title),p(2),c("postMeta",a),p(2),c("innerHTML",a.summary,w),p(2),c("routerLink",f(11,7,a))}}function mt(e,t){if(e&1&&(r(0,"mat-toolbar",2)(1,"h1"),u(2),s(),r(3,"h2"),u(4),s()(),I(5,st,16,9,"mat-card",11,pt)),e&2){let a=t.$implicit;p(2),B(a.year),p(2),H("\u5E74 (\u5171 ",a.postCount," \u7BC7\u6587\u7AE0)"),x(5,a.posts)}}var it=10,g=(()=>{let t=class t{constructor(n){this.route=n,this.currentPage$=this.route.paramMap.pipe(l(o=>+(o.get("page")||1))),this.totalPosts$=this.route.data.pipe(l(o=>o.posts)),this.yearPostsCount$=this.totalPosts$.pipe(l(o=>o.reduce((i,h)=>{let m=h.date.substr(0,4);return i[m]||(i[m]=0),i[m]+=1,i},{}))),this.posts$=this.currentPage$.pipe(E(o=>this.totalPosts$.pipe(l(i=>ot(o,it,i)))),E(o=>this.yearPostsCount$.pipe(l(i=>o.reduce((h,m)=>{let $=m.date.slice(0,4),j=h.find(at=>at.year===$);return j?j.posts.push(m):h.push({year:$,postCount:i[$],posts:[m]}),h},[]))))),this.totalPage$=this.totalPosts$.pipe(l(o=>Math.ceil(Object.keys(o).length/it)))}ngOnInit(){}};t.\u0275fac=function(o){return new(o||t)(N(O))},t.\u0275cmp=D({type:t,selectors:[["app-blog-archives"]],standalone:!0,features:[R],decls:7,vars:8,consts:[["appearance","outlined",1,"pagination"],["linkBase","/blog/archives/page",3,"currentPage","totalPage"],[1,"year-header","mat-elevation-z4"],["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[3,"routerLink"],[1,"blog-post-subtitle"],[3,"postMeta"],[1,"blog-post-content"],[3,"innerHTML"],["mat-raised-button","","color","primary",1,"read-more",3,"routerLink"],["appearance","outlined","class","blog-post"]],template:function(o,i){o&1&&(I(0,mt,7,2,null,null,nt),d(2,"push"),r(3,"mat-card",0),y(4,"app-pagination",1),d(5,"push"),d(6,"push"),s()),o&2&&(x(0,f(2,2,i.posts$)),p(4),c("currentPage",f(5,4,i.currentPage$)||1)("totalPage",f(6,6,i.totalPage$)||1))},dependencies:[S,V,v,q,K,U,Q,J,G,_,b,Z,C,W,tt,et,Y]});let e=t;return e})();var lt=[{path:"",resolve:{posts:F},component:g},{path:"page/:page",resolve:{posts:F},component:g}],rt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=P({type:t}),t.\u0275inj=M({imports:[T.forChild(lt),T]});let e=t;return e})();var Ot=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=P({type:t}),t.\u0275inj=M({imports:[z,rt,S,v,C,b,g]});let e=t;return e})();export{Ot as BlogArchivesModule};
