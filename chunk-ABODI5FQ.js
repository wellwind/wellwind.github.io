import{a as N,b as W}from"./chunk-SWTRZAGR.js";import{a as K,b as Q}from"./chunk-G5NBVLXC.js";import{a as j,b as H,c as R,d as w,e as z,f as G}from"./chunk-IRXQAN46.js";import{a as Z,b as q,d as J,g as O}from"./chunk-6ULYRPDS.js";import"./chunk-364DFF23.js";import{g as $}from"./chunk-BYR6MDRX.js";import{b as I,e as _,g as F,h as L}from"./chunk-GWTND7NA.js";import{Ca as m,J as E,Ja as h,Ka as P,La as r,Ma as p,Na as u,Qb as D,R as x,Z as B,bb as l,cb as C,db as T,fb as k,ga as A,ia as i,jb as y,kb as M,ra as c}from"./chunk-EKOPKSN5.js";import"./chunk-2BJYVO3V.js";import"./chunk-CWTPBX7D.js";var v=(()=>{let t=class t{constructor(){this.sitePostService=B($)}resolve(){return this.sitePostService.postsMetaWithSlugAndSortDesc$}};t.\u0275fac=function(a){return new(a||t)},t.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var tt=(e,t)=>t.year,et=(e,t)=>t.slug;function ot(e,t){if(e&1&&(r(0,"mat-card",3)(1,"mat-card-title",4)(2,"a",5),y(3,"postDateAsPath"),l(4),p()(),r(5,"mat-card-subtitle",6),u(6,"app-blog-post-subtitle",7),p(),r(7,"mat-card-content",8),u(8,"div",9),p(),r(9,"mat-card-footer")(10,"a",10),y(11,"postDateAsPath"),r(12,"mat-icon"),l(13,"read_more"),p(),r(14,"span"),l(15,"\u7E7C\u7E8C\u95B1\u8B80"),p()()()()),e&2){let n=t.$implicit;i(2),m("routerLink",M(3,5,n)),i(2),C(n.title),i(2),m("postMeta",n),i(2),m("innerHTML",n.summary,A),i(2),m("routerLink",M(11,7,n))}}function at(e,t){if(e&1&&(r(0,"mat-toolbar",2)(1,"h1"),l(2),p(),r(3,"h2"),l(4),p()(),h(5,ot,16,9,"mat-card",11,et)),e&2){let n=t.$implicit;i(2),C(n.year),i(2),T("\u5E74 (\u5171 ",n.postCount," \u7BC7\u6587\u7AE0)"),i(),P(n.posts)}}var U=10,b=(()=>{let t=class t{constructor(){this.currentPage=Z(o=>+(o.get("page")||1),1),this.totalPosts=q(o=>o.posts,[]),this.yearPostsCount=c(()=>this.totalPosts().reduce((o,a)=>{let s=a.date.substr(0,4);return o[s]||(o[s]=0),o[s]+=1,o},{})),this.posts=c(()=>{let o=this.totalPosts(),a=this.currentPage(),s=Q(a,U,o),V=this.yearPostsCount();return s.reduce((d,f)=>{let g=f.date.slice(0,4),S=d.find(X=>X.year===g);return S?S.posts.push(f):d.push({year:g,postCount:V[g],posts:[f]}),d},[])}),this.totalPage=c(()=>Math.ceil(this.totalPosts().length/U))}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=E({type:t,selectors:[["app-blog-archives"]],standalone:!0,features:[k],decls:4,vars:2,consts:[["appearance","outlined",1,"pagination"],["linkBase","/blog/archives/page",3,"currentPage","totalPage"],[1,"year-header","mat-elevation-z4","!mb-2"],["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[3,"routerLink"],[1,"blog-post-subtitle"],[3,"postMeta"],[1,"blog-post-content"],[3,"innerHTML"],["mat-raised-button","","color","primary",1,"read-more",3,"routerLink"],["appearance","outlined","class","blog-post"]],template:function(a,s){a&1&&(h(0,at,7,2,null,null,tt),r(2,"mat-card",0),u(3,"app-pagination",1),p()),a&2&&(P(s.posts()),i(3),m("currentPage",s.currentPage()||1)("totalPage",s.totalPage()||1))},dependencies:[W,N,G,j,R,z,w,H,D,J,_,I,L,F,K,O],changeDetection:0});let e=t;return e})();var it=[{path:"",resolve:{posts:v},component:b},{path:"page/:page",resolve:{posts:v},component:b}],kt=it;export{kt as default};
