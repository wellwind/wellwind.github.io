import{a as mt,b as ct}from"./chunk-DMKRETPT.js";import{a as ot,b as at}from"./chunk-PMJUEI5Q.js";import{a as z}from"./chunk-FYBESAFS.js";import{a as st,b as lt}from"./chunk-RNNFPY6H.js";import{a as k,b as B,c as T,d as E,e as it,f as I}from"./chunk-5SURUXUN.js";import{a as w,b as _,c as nt,d as rt,g as pt}from"./chunk-HXKAOSDU.js";import"./chunk-VXCSXRBK.js";import{b as Y,c as tt,d as et,g as x}from"./chunk-Z5R2DTUN.js";import{b as J,e as N,g as Q,h as X}from"./chunk-FPA2J5JD.js";import{Aa as G,Ba as K,Ca as U,Da as C,Ea as v,Fa as a,Ga as n,Ha as S,I as P,Lb as b,M as c,N as M,Pa as F,Q as $,Sa as V,Ua as l,Va as j,Wa as h,Ya as y,_a as W,aa as R,ab as m,bb as u,cb as Z,ga as d,j as O,ja as p,oa as f,tb as q,ua as g,ya as H}from"./chunk-IN3HSR3R.js";import"./chunk-2BJYVO3V.js";import"./chunk-CWTPBX7D.js";var Pt=(e,t)=>t.slug;function Mt(e,t){if(e&1&&(a(0,"mat-card",3)(1,"mat-card-title",4)(2,"a",5),m(3,"postDateAsPath"),l(4),n()(),a(5,"mat-card-subtitle",6),S(6,"app-blog-post-subtitle",7),n(),a(7,"mat-card-content",8),S(8,"div",9),n(),a(9,"mat-card-footer")(10,"a",10),m(11,"postDateAsPath"),a(12,"mat-icon"),l(13,"read_more"),n(),a(14,"span"),l(15,"\u7E7C\u7E8C\u95B1\u8B80"),n()()()()),e&2){let s=t.$implicit;p(2),g("routerLink",u(3,5,s)),p(2),j(s.title),p(2),g("postMeta",s),p(2),g("innerHTML",s.summary,R),p(2),g("routerLink",u(11,7,s))}}var gt=10,A=(()=>{let t=class t{constructor(){this.siteMetaService=c(z),this.tagSlug=w(i=>i.get("tag-slug"),""),this.currentPage=w(i=>+(i.get("page")||1),1),this.tagPosts=_(i=>i.posts,[]),this.tagPostsCount=d(()=>this.tagPosts().length),this.posts=d(()=>lt(this.currentPage(),gt,this.tagPosts())),this.totalPage=d(()=>Math.ceil(this.tagPostsCount()/gt)),this.updateMetaEffect=f(()=>{this.siteMetaService.resetMeta({title:`\u6A19\u7C64\uFF1A${this.tagSlug()}`,description:`${this.tagSlug()} \u76F8\u95DC\u6587\u7AE0`,keywords:[this.tagSlug()||""],type:"website"})})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=M({type:t,selectors:[["app-blog-tag-posts"]],standalone:!0,features:[y],decls:10,vars:7,consts:[[1,"tags-header","mat-elevation-z4","!mb-2"],["appearance","outlined",1,"pagination"],[3,"linkBase","currentPage","totalPage"],["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[3,"routerLink"],[1,"blog-post-subtitle"],[3,"postMeta"],[1,"blog-post-content"],[3,"innerHTML"],["mat-raised-button","","color","primary",1,"read-more",3,"routerLink"],["appearance","outlined","class","blog-post"]],template:function(o,r){o&1&&(a(0,"mat-toolbar",0)(1,"h1"),l(2),m(3,"unslugify"),n(),a(4,"h2"),l(5),n()(),C(6,Mt,16,9,"mat-card",11,Pt),a(8,"mat-card",1),S(9,"app-pagination",2),n()),o&2&&(p(2),j(u(3,5,r.tagSlug()||"")),p(3),h("\u6A19\u7C64 (\u5171 ",r.tagPostsCount()," \u7BC7\u6587\u7AE0)"),v(6,r.posts()),p(4),V("linkBase","/blog/tags/",r.tagSlug(),"/page"),g("currentPage",r.currentPage()||1)("totalPage",r.totalPage()||1))},dependencies:[at,ot,I,k,T,it,E,B,b,rt,N,J,X,Q,st,ct,pt],changeDetection:0});let e=t;return e})();var L=(()=>{let t=class t{constructor(){this.sitePostService=c(x)}resolve(i){let o=i.paramMap.get("tag-slug");return this.sitePostService.tagsAndPosts$.pipe(O(r=>mt(o,r)),O(r=>et([tt(Y("date"))],r)))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ut=(()=>{let t=class t{constructor(){this.sitePostService=c(x)}resolve(){return this.sitePostService.tagsAndPosts$}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var dt=(()=>{let t=class t{transform(i,o){return i>=o*.4?1:i>=o*.2?2:i>=o*.1?3:4}};t.\u0275fac=function(o){return new(o||t)},t.\u0275pipe=$({name:"blogPostTagSize",type:t,pure:!0,standalone:!0});let e=t;return e})();var Ct=e=>["/blog/tags",e];function vt(e,t){if(e&1&&(a(0,"a",6),m(1,"blogPostTagSize"),m(2,"slugify"),l(3),n()),e&2){let s=F().$implicit,i=F();H("tag size-",Z(1,5,s.value.length,i.maxPostsCount()||0),""),g("routerLink",W(10,Ct,u(2,8,s.key))),p(3),h(" ",s.key," ")}}function St(e,t){if(e&1&&G(0,vt,4,12,"a",5),e&2){let s=t.$implicit;K(0,s!=null&&s.key?0:-1)}}var ft=(()=>{let t=class t{constructor(){this.siteMetaService=c(z),this.tags=_(i=>i.tags,{}),this.aa=d(()=>Object.values(this.tags()).map(i=>i.length)),this.maxPostsCount=d(()=>Math.max(...Object.values(this.tags()).map(i=>i.length))),this._=f(()=>console.log(this.tags())),this._updateMetaEffect=f(()=>{this.siteMetaService.resetMeta({title:"\u6A19\u7C64",description:"\u986F\u793A\u6240\u6709\u6A19\u7C64",keywords:[""],type:"website"})})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=M({type:t,selectors:[["app-blog-tags"]],standalone:!0,features:[y],decls:11,vars:5,consts:[["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[1,"blog-post-subtitle"],[1,"blog-post-content"],[1,"tags"],[3,"class","routerLink"],[3,"routerLink"]],template:function(o,r){o&1&&(a(0,"mat-card",0)(1,"mat-card-title",1),l(2,"\u6A19\u7C64"),n(),a(3,"mat-card-subtitle",2),l(4),m(5,"keyvalue"),n(),a(6,"mat-card-content",3)(7,"div",4),C(8,St,1,1,null,null,U),m(10,"keyvalue"),n()()()),o&2&&(p(4),h(" \u5171 ",u(5,1,r.tags()).length," \u500B\u6A19\u7C64 "),v(8,u(10,3,r.tags())))},dependencies:[I,k,T,E,B,b,q,nt,dt],styles:[".tags[_ngcontent-%COMP%]{display:flex;align-items:baseline;justify-content:center;flex-wrap:wrap}.tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{margin:8px}.tags[_ngcontent-%COMP%]   .tag.size-1[_ngcontent-%COMP%]{font-size:36px}.tags[_ngcontent-%COMP%]   .tag.size-2[_ngcontent-%COMP%]{font-size:30px}.tags[_ngcontent-%COMP%]   .tag.size-3[_ngcontent-%COMP%]{font-size:24px}.tags[_ngcontent-%COMP%]   .tag.size-4[_ngcontent-%COMP%]{font-size:16px}"],changeDetection:0});let e=t;return e})();var yt=[{path:":tag-slug",resolve:{posts:L},component:A},{path:":tag-slug/page/:page",resolve:{posts:L},component:A},{path:"",resolve:{tags:ut},component:ft}],fe=yt;export{fe as default};
