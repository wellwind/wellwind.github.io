"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[709],{8709:(S,f,e)=>{e.r(f),e.d(f,{BlogArchivesModule:()=>F});var A=e(4755),u=e(1728),i=e(6012),g=e(430),h=e(9383),l=e(5608),t=e(2223),B=e(5447);let Z=(()=>{class o{constructor(a){this.sitePostService=a}resolve(a,s){return this.sitePostService.postsMetaWithSlugAndSortDesc$}static#t=this.\u0275fac=function(s){return new(s||o)(t.LFG(B.g))};static#o=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var C=e(6829),c=e(4850),P=e(7545),T=e(7122),U=e(8173),L=e(7975),Q=e(2985);function M(o,d){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-card",4)(2,"mat-card-title",5)(3,"a",6),t.ALo(4,"postDateAsPath"),t._uU(5),t.qZA()(),t.TgZ(6,"mat-card-subtitle",7),t._UZ(7,"app-blog-post-subtitle",8),t.qZA(),t.TgZ(8,"mat-card-content",9),t._UZ(9,"div",10),t.qZA(),t.TgZ(10,"mat-card-footer")(11,"a",11),t.ALo(12,"postDateAsPath"),t.TgZ(13,"mat-icon"),t._uU(14,"read_more"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"\u7e7c\u7e8c\u95b1\u8b80"),t.qZA()()()(),t.BQk()),2&o){const a=d.$implicit;t.xp6(3),t.Q6J("routerLink",t.lcZ(4,5,a)),t.xp6(2),t.Oqu(a.title),t.xp6(2),t.Q6J("postMeta",a),t.xp6(2),t.Q6J("innerHTML",a.summary,t.oJD),t.xp6(2),t.Q6J("routerLink",t.lcZ(12,7,a))}}function J(o,d){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-toolbar",3)(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"h2"),t._uU(5),t.qZA()(),t.YNc(6,M,17,9,"ng-container",0),t.BQk()),2&o){const a=d.$implicit;t.xp6(3),t.Oqu(a.year),t.xp6(2),t.hij("\u5e74 (\u5171 ",a.postCount," \u7bc7\u6587\u7ae0)"),t.xp6(1),t.Q6J("ngForOf",a.posts)}}let m=(()=>{class o{constructor(a){this.route=a,this.currentPage$=this.route.paramMap.pipe((0,c.U)(s=>+(s.get("page")||1))),this.totalPosts$=this.route.data.pipe((0,c.U)(s=>s.posts)),this.yearPostsCount$=this.totalPosts$.pipe((0,c.U)(s=>s.reduce((n,p)=>{const r=p.date.substr(0,4);return n[r]||(n[r]=0),n[r]+=1,n},{}))),this.posts$=this.currentPage$.pipe((0,P.w)(s=>this.totalPosts$.pipe((0,c.U)(n=>(0,Q.$)(s,10,n)))),(0,P.w)(s=>this.yearPostsCount$.pipe((0,c.U)(n=>s.reduce((p,r)=>{const v=r.date.slice(0,4);let $=p.find(O=>O.year===v);return $?$.posts.push(r):p.push({year:v,postCount:n[v],posts:[r]}),p},[]))))),this.totalPage$=this.totalPosts$.pipe((0,c.U)(s=>Math.ceil(Object.keys(s).length/10)))}ngOnInit(){}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(l.gz))};static#o=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-blog-archives"]],standalone:!0,features:[t.jDz],decls:6,vars:9,consts:[[4,"ngFor","ngForOf"],["appearance","outlined",1,"pagination"],["linkBase","/blog/archives/page",3,"currentPage","totalPage"],[1,"year-header","mat-elevation-z4"],["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[3,"routerLink"],[1,"blog-post-subtitle"],[3,"postMeta"],[1,"blog-post-content"],[3,"innerHTML"],["mat-raised-button","","color","primary",1,"read-more",3,"routerLink"]],template:function(s,n){1&s&&(t.YNc(0,J,7,3,"ng-container",0),t.ALo(1,"push"),t.TgZ(2,"mat-card",1),t._UZ(3,"app-pagination",2),t.ALo(4,"push"),t.ALo(5,"push"),t.qZA()),2&s&&(t.Q6J("ngForOf",t.lcZ(1,3,n.posts$)),t.xp6(3),t.Q6J("currentPage",t.lcZ(4,5,n.currentPage$)||1)("totalPage",t.lcZ(5,7,n.totalPage$)||1))},dependencies:[A.ax,h.g0,h.Ye,i.QW,i.a8,i.dn,i.rt,i.$j,i.n5,l.rH,T.z,u.ot,u.zs,g.Ps,g.Hw,U.Q,L.y,C.c]})}return o})();const x=[{path:"",resolve:{posts:Z},component:m},{path:"page/:page",resolve:{posts:Z},component:m}];let z=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#o=this.\u0275mod=t.oAB({type:o});static#s=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(x),l.Bz]})}return o})(),F=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#o=this.\u0275mod=t.oAB({type:o});static#s=this.\u0275inj=t.cJS({imports:[A.ez,z,h.g0,i.QW,g.Ps,u.ot,m]})}return o})()}}]);