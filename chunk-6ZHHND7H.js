import{a as mt,b as ct}from"./chunk-SA2ET6YS.js";import{a as tt,b as N}from"./chunk-GYCTRUTU.js";import{a as O}from"./chunk-PPW5ZSVI.js";import{a as nt,b as st}from"./chunk-P5W7L3NE.js";import{a as rt,b as at,e as pt}from"./chunk-UPR56KL5.js";import{a as w,b as A,c as L,d as D,e as _,f as h}from"./chunk-P6BWR2LZ.js";import"./chunk-JCRBOZPT.js";import{a as et,b as it,c as ot,f as R,g as H}from"./chunk-APYMP6ZI.js";import{b as Y,e as T}from"./chunk-X7W3THJO.js";import{Da as B,Ea as I,Fa as p,G as V,Ga as s,Ha as k,Ib as x,Lb as j,O as P,Ob as K,P as S,Pc as X,Qc as F,S as C,Sa as Z,U as b,Ua as l,V as $,Va as G,Wa as g,Ya as E,_a as q,ab as a,bb as n,ea as W,j as c,la as m,ma as f,tb as J,ua as d,ub as Q}from"./chunk-LEKLC6X2.js";import"./chunk-2BJYVO3V.js";import"./chunk-CWTPBX7D.js";var Mt=(e,t)=>t.slug;function vt(e,t){if(e&1&&(p(0,"mat-card",3)(1,"mat-card-title",4)(2,"a",5),a(3,"postDateAsPath"),l(4),s()(),p(5,"mat-card-subtitle",6),k(6,"app-blog-post-subtitle",7),s(),p(7,"mat-card-content",8),k(8,"div",9),s(),p(9,"mat-card-footer")(10,"a",10),a(11,"postDateAsPath"),p(12,"mat-icon"),l(13,"read_more"),s(),p(14,"span"),l(15,"\u7E7C\u7E8C\u95B1\u8B80"),s()()()()),e&2){let u=t.$implicit;m(2),d("routerLink",n(3,5,u)),m(2),G(u.title),m(2),d("postMeta",u),m(2),d("innerHTML",u.summary,W),m(2),d("routerLink",n(11,7,u))}}var lt=10,y=(()=>{let t=class t{constructor(r,o){this.route=r,this.siteMetaService=o,this.categorySlug$=this.route.paramMap.pipe(c(i=>i.get("category-slug"))),this.currentPage$=this.route.paramMap.pipe(c(i=>+(i.get("page")||1))),this.categoryPosts$=this.route.data.pipe(c(i=>i.posts)),this.categoryPostsCount$=this.categoryPosts$.pipe(c(i=>i.length)),this.posts$=this.currentPage$.pipe(V(i=>this.categoryPosts$.pipe(c(M=>st(i,lt,M))))),this.totalPage$=this.categoryPosts$.pipe(c(i=>Math.ceil(Object.keys(i).length/lt)))}ngOnInit(){this.categorySlug$.subscribe(r=>{this.siteMetaService.resetMeta({title:`\u5206\u985E\uFF1A${r}`,description:`${r} \u76F8\u95DC\u6587\u7AE0`,keywords:[r||""],type:"website"})})}};t.\u0275fac=function(o){return new(o||t)(f(x),f(O))},t.\u0275cmp=b({type:t,selectors:[["app-blog-categories-posts"]],standalone:!0,features:[E],decls:16,vars:19,consts:[[1,"categories-header","mat-elevation-z4"],["appearance","outlined",1,"pagination"],[3,"linkBase","currentPage","totalPage"],["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[3,"routerLink"],[1,"blog-post-subtitle"],[3,"postMeta"],[1,"blog-post-content"],[3,"innerHTML"],["mat-raised-button","","color","primary",1,"read-more",3,"routerLink"],["appearance","outlined","class","blog-post"]],template:function(o,i){o&1&&(p(0,"mat-toolbar",0)(1,"h1"),l(2),a(3,"unslugify"),a(4,"push"),s(),p(5,"h2"),l(6),a(7,"push"),s()(),B(8,vt,16,9,"mat-card",11,Mt),a(10,"push"),p(11,"mat-card",1),k(12,"app-pagination",2),a(13,"push"),a(14,"push"),a(15,"push"),s()),o&2&&(m(2),G(n(3,5,n(4,7,i.categorySlug$)||"")),m(4),g("\u5206\u985E (\u5171 ",n(7,9,i.categoryPostsCount$)," \u7BC7\u6587\u7AE0)"),I(8,n(10,11,i.posts$)),m(6),Z("linkBase","/blog/categories/",n(13,13,i.categorySlug$),"/page"),d("currentPage",n(14,15,i.currentPage$)||1)("totalPage",n(15,17,i.totalPage$)||1))},dependencies:[N,tt,h,w,L,_,D,A,j,at,T,Y,F,X,nt,mt,pt,H]});let e=t;return e})();var U=(()=>{let t=class t{constructor(r){this.sitePostService=r}resolve(r,o){let i=r.paramMap.get("category-slug");return this.sitePostService.categoriesAndPosts$.pipe(c(M=>ct(i,M)),c(M=>ot([it(et("date"))],M)))}};t.\u0275fac=function(o){return new(o||t)(C(R))},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ut=(()=>{let t=class t{constructor(r){this.sitePostService=r}resolve(r,o){return this.sitePostService.categoriesAndPosts$}};t.\u0275fac=function(o){return new(o||t)(C(R))},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Pt=(e,t)=>t.key,St=e=>["/blog/categories",e];function Ct(e,t){if(e&1&&(p(0,"li")(1,"a",4),a(2,"slugify"),l(3),s(),l(4),s()),e&2){let u=t.$implicit;m(1),d("routerLink",q(5,St,n(2,3,u.key||""))),m(2),g(" ",u.key," "),m(1),g(" (",u.value.length,") ")}}var z=(()=>{let t=class t{constructor(r,o){this.route=r,this.siteMetaService=o,this.categories$=this.route.data.pipe(c(i=>i.categories))}ngOnInit(){this.siteMetaService.resetMeta({title:"\u5206\u985E",description:"\u986F\u793A\u6240\u6709\u5206\u985E",keywords:[""],type:"website"})}};t.\u0275fac=function(o){return new(o||t)(f(x),f(O))},t.\u0275cmp=b({type:t,selectors:[["app-blog-categories"]],standalone:!0,features:[E],decls:13,vars:9,consts:[["appearance","outlined",1,"blog-post"],[1,"blog-post-title"],[1,"blog-post-subtitle"],[1,"blog-post-content"],[3,"routerLink"]],template:function(o,i){o&1&&(p(0,"mat-card",0)(1,"mat-card-title",1),l(2," \u5206\u985E "),s(),p(3,"mat-card-subtitle",2),l(4),a(5,"keyvalue"),a(6,"push"),s(),p(7,"mat-card-content",3)(8,"ul"),B(9,Ct,5,7,"li",null,Pt),a(11,"keyvalue"),a(12,"push"),s()()()),o&2&&(m(4),g(" \u5171 ",n(5,1,n(6,3,i.categories$)).length," \u500B\u5206\u985E "),I(9,n(11,5,n(12,7,i.categories$))))},dependencies:[h,w,L,D,A,j,J,rt,H]});let e=t;return e})();var bt=[{path:":category-slug",resolve:{posts:U},component:y},{path:":category-slug/page/:page",resolve:{posts:U},component:y},{path:"",resolve:{categories:ut},component:z}],dt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=$({type:t}),t.\u0275inj=S({imports:[K.forChild(bt),K]});let e=t;return e})();var de=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=$({type:t}),t.\u0275inj=S({imports:[Q,dt,h,F,T,N,z,y]});let e=t;return e})();export{de as BlogCategoriesModule};
